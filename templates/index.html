<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Kalkulator Matematika Keuangan</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="app">

    <button id="themeToggle" class="theme-toggle-icon" aria-label="Toggle theme">
    ğŸŒ™
</button>


    <header class="header">
        <h1>Kalkulator Matematika Keuangan</h1>
        <p>Aplikasi perhitungan <b>Time Value of Money</b></p>
        <span>Future Value â€¢ Present Value â€¢ Anuitas</span>
    </header>

    <section class="card">
        <h2>ğŸ“Š Kalkulator TVM</h2>

        <form method="POST">
            <div class="grid">
                <div>
                    <label>Mode Perhitungan</label>
                    <select name="mode" required>
                        <option value="fv">Future Value</option>
                        <option value="pv">Present Value</option>
                        <option value="annuity">Anuitas</option>
                    </select>
                </div>

                <div>
                    <label>Nilai</label>
                    <input type="number" name="value" required>
                </div>

                <div>
                    <label>Bunga (%)</label>
                    <input type="number" step="0.01" name="rate" required>
                </div>

                <div>
                    <label>Periode (Tahun)</label>
                    <input type="number" name="period" required>
                </div>
            </div>

            <button type="submit">ğŸ“ˆ Hitung</button>
        </form>

        {% if result %}
        <div class="result">
            <h3>Hasil</h3>
            <p>Rp {{ "{:,.2f}".format(result) }}</p>
        </div>
        {% endif %}
    </section>

    {% if chart_data %}
    <section class="chart-box">
        <h3>ğŸ“ˆ Grafik Nilai Investasi</h3>
        <canvas id="investmentChart"></canvas>
    </section>

<script>
    window.chartYears = JSON.parse('{{ years | tojson }}');
    window.chartValues = JSON.parse('{{ chart_data | tojson }}');
</script>


    <script src="{{ url_for('static', filename='chart.js') }}"></script>
    {% endif %}

    <footer>
        Â© 2026 Kalkulator Matematika Keuangan
    </footer>

</div>

<script>
    const toggle = document.getElementById("themeToggle");
    toggle.onclick = () => {
        document.body.classList.toggle("dark");
        toggle.innerText = document.body.classList.contains("dark")
            ? "â˜€ï¸ Light Mode"
            : "ğŸŒ™ Dark Mode";
    };
</script>

</body>
</html>
